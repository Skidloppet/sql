<?php
 ini_set("display_errors", "off");
$spar = '
<!-- Delsträcka 0 -->
<a xlink:href="Kund.php" target="_top">
<a/>;
<!-- Delsträcka 1 -->
<a xlink:href="Kund.php?DS=1" target="_top">
<path d="M153.93,282.37c-0.79-7.89-.5-16.14,3.2-20.84" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 2 -->
<a xlink:href="Kund.php?DS=2" target="_top">
<path d="M157.13,261.53a9.93,9.93,0,0,1,2.23-2.09c6.42-4.36,16.53.26,17.42-2,1-2.5-11.74-5.94-16.25-16.26A23,23,0,0,1,158.89,230" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 3 -->
<a xlink:href="Kund.php?DS=3" target="_top">
<path d="M158.89,230a26.91,26.91,0,0,1,8.86-17.87c6.8-5.9,18-8.88,24.31-4.64,5.56,3.75,8.76,14.18,8.76,14.18a20.45,20.45,0,0,0,5.39,4.13" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 4 -->
<a xlink:href="Kund.php?DS=4" target="_top">
<path d="M206.21,225.83a14.7,14.7,0,0,0,4.45,1.46c9.85,1.52,17.67-8.18,24.74-13.45" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 5 -->
<a xlink:href="Kund.php?DS=5" target="_top">
<path d="M235.4,213.85c3.27-2.43,6.38-3.92,9.47-2.92,5.31,1.73,8.52,10.19,7.18,16-1.43,6.24-7.23,5.59-10.37,12.55-3.65,8.08,2.67,12.28-.39,23.62-1.92,7.09-4.91,7.37-4.87,12.41,0.06,7.44,6.66,14.16,13,17.15a23.32,23.32,0,0,0,2.62,1" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 6 -->
<a xlink:href="Kund.php?DS=6" target="_top">
<path d="M241.64,251.9a23.37,23.37,0,0,1-.35,11.2c-1.92,7.09-4.91,7.37-4.87,12.41,0.06,7.44,6.66,14.16,13,17.15a23.32,23.32,0,0,0,2.62,1" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 7 -->
<a xlink:href="Kund.php?DS=7" target="_top">
<path d="M252.07,293.69c9.16,3,20,.47,25.08-5.92,3.8-4.8,1.83-12.17,4.52-13.7,6.69-3.67,11-6.42,14.14-8.47" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>

<!-- Delsträcka 8 -->
<a xlink:href="Kund.php?DS=8" target="_top">
<path d="M295.8,265.61c6.94-4.56,7.81-5.56,15.29-5.19,10.28,0.5,13.15,5.52,18.84,3.1" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 9 -->
<a xlink:href="Kund.php?DS=9" target="_top">
<path d="M329.93,263.52c4.67-2,5.15-6.4,11.45-21.14,2-4.58,3.61-8.44,5.11-11.67" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 10 -->
<a xlink:href="Kund.php?DS=10" target="_top">
<path d="M346.49,230.71c3.24-7,5.72-11,8.85-12.94,8.72-5.35,14.18,1.6,24.49-4a20.12,20.12,0,0,0,3.71-2.56" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>

<!-- Delsträcka 11 -->
<a xlink:href="Kund.php?DS=11" target="_top">
<path d="M383.53,211.22c4.9-4.29,5.57-9.36,13.38-13.23,2-1,12.36-6.13,18.06-2.22,2.47,1.69,4.47,5.25,5.7,10.53" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 12 -->
<a xlink:href="Kund.php?DS=12" target="_top">
<path d="M420.67,206.31c1.95,8.32,2,20.9-1,37.19" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 13 -->
<a xlink:href="Kund.php?DS=13" target="_top">
<path d="M419.72,243.5c-1.12,6.16-2.67,12.85-4.71,20-0.21,7.73-.22,15.08,4.57,21.56,5.48,7.41,16,12,25.43,10.77" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 14 -->
<a xlink:href="Kund.php?DS=14" target="_top">
<path d="M445,295.88q0.84-.11,1.68-0.27c9.86-2,11.78-9.23,26.3-22.48a171.12,171.12,0,0,1,14.48-12.26" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>

<!-- Delsträcka 15 -->
<a xlink:href="Kund.php?DS=15" target="_top">
<path d="M487.46,260.87a67.76,67.76,0,0,1,14.46-8.18c9.24-3.76,14.25-3.13,25-3.59" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 16 -->
<a xlink:href="Kund.php?DS=16" target="_top">
<path d="M526.92,249.1a201,201,0,0,0,25.79-2.83c17.7-3,21.71-5.33,24.71-8.21" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 17 -->
<a xlink:href="Kund.php?DS=17" target="_top">
<path d="M577.42,238.07c10.15-9.74,4-21,11.89-29.57,2.95-3.21,7.19-5.31,12.21-6.4" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 18 -->
<a xlink:href="Kund.php?DS=18" target="_top">
<path d="M601.52,202.1c10-2.18,23-.36,35,4.68" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 19 -->
<a xlink:href="Kund.php?DS=19" target="_top">
<path d="M636.54,206.77a67.45,67.45,0,0,1,18.35,11.29,65.14,65.14,0,0,1,13.95,17.62" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 20 -->
<a xlink:href="Kund.php?DS=20" target="_top">
<path d="M668.83,235.68c4.29,8,5.87,15.58,3.13,19.17-1.7,2.22-4.92,2.74-6.47,6.63-1.32,3.31-1.07,8.16,1.55,10.64,3.53,3.32,8.7-.13,17.31.06,6.22,0.14,14.53,2.19,19.66,6.5" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
<a/>;

<!-- Delsträcka 21 -->
<a xlink:href="Kund.php?DS=21" target="_top">
<path d="M704,278.67a14.2,14.2,0,0,1,3.23,3.77c4.63,8.08,0,22.08-12.29,33.13" transform="translate(-77.06 -164.09)" style="fill:none;stroke:{color};stroke-miterlimit:10;stroke-width:2px"/>
</a>';


$sparArr = explode("a/>",$spar);

$red ="#ff0000";
$yellow ="#ffff00";
$green ="#66ff33";
$grey ="#d2d1e6";

			foreach($pdo->query( 'select * from karta order by rspName;' ) as $row){
					    
					if ($row['rating'] >= 4){
						$SubPlaceNameArray[$row['rspName']] = $green;
					}
					else if ($row['rating'] <= 2){
						$SubPlaceNameArray[$row['rspName']] = $red;
					}
					else if ($row['rating'] = 3){
						$SubPlaceNameArray[$row['rspName']] = $yellow;
					}
					else{
						$SubPlaceNameArray[$row['rspName']]= $grey;
					}
					
			}

	#print_r ($SubPlaceNameArray);


foreach($sparArr AS $key => $val){
	 $sparArr[$key] = str_replace("{color}", $SubPlaceNameArray[$key], $val);
}

?>
<div>
<svg id="Layer_2" data-name="Layer 2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 634.39 189.23">
<defs>
<symbol id="Compass_Rose" data-name="Compass Rose" viewBox="0 0 51.15 60.64">
<path d="M30.77,26.28a10.22,10.22,0,1,1-5.19-1.42A10.2,10.2,0,0,1,30.77,26.28Z" style="fill:none;stroke:#231f20"/>
<path d="M20.38,26.28a10.21,10.21,0,0,1,10.38,0L25.47,11Z" style="fill:none;stroke:#231f20"/>
<path d="M25.58,24.86a10.16,10.16,0,0,1,5.19,1.42L25.47,11V24.86h0.11Z" style="fill:#231f20;stroke:#231f20"/>
<path d="M16.79,40.25a10.22,10.22,0,0,1,0-10.38L1.55,35.17Z" style="fill:none;stroke:#231f20"/>
<path d="M15.37,35.06a10.16,10.16,0,0,1,1.42-5.19L1.55,35.17H15.38V35.06Z" style="fill:#231f20;stroke:#231f20"/>
<path d="M30.77,43.85a10.13,10.13,0,0,1-5.19,1.42,10.14,10.14,0,0,1-5.19-1.42l5.3,15.24Z" style="fill:none;stroke:#231f20"/>
<path d="M25.58,45.27a10.14,10.14,0,0,1-5.19-1.42l5.3,15.24V45.26H25.58Z" style="fill:#231f20;stroke:#231f20"/>
<path d="M34.36,29.87a10.21,10.21,0,0,1,0,10.39L49.6,35Z" style="fill:none;stroke:#231f20"/>
<path d="M35.78,35.06a10.15,10.15,0,0,1-1.42,5.19L49.6,35H35.78v0.11Z" style="fill:#231f20;stroke:#231f20"/>
<path d="M29.31,0.22c-0.67.08-1,.13-1,1.52V8H28.11L23.42,1.48h0V6.1c0,1.22.22,1.48,1,1.51V7.83H21.9V7.61c0.81-.06,1-0.24,1-1.51V0.87a1.07,1.07,0,0,0-1-.65V0h1.82L27.8,5.69h0v-4c0-1.36-.3-1.46-1-1.52V0h2.5V0.22Z" style="fill:#231f20"/>
</symbol>
</defs>
<!-- <title>karta_kund_2</title> -->
<!-- Vattendrag Ramsvattnet -->
<path d="M140.72,244.53a296.69,296.69,0,0,1,42.79-2.82c29.18,0.2,50.15,4.67,70.25,9,15,3.2,22.12,5.54,29.5,9.15C293,264.59,305.76,271,312.34,285a43.93,43.93,0,0,1,4,19.63" transform="translate(-77.06 -164.09)" style="fill:none;stroke:#0365f4;stroke-miterlimit:10;stroke-width:2px"/>
<!-- Vattendrag Afsnan -->
<path d="M375.87,277.12c8.9-4.43,12.25-9.46,13.58-13.43,2.18-6.48-.7-11,2.52-15.91,2.62-4,7.16-5,13.43-6.47,20.91-4.92,32.59-7.71,32.6-9.69,0-2.81-23.55.68-33.13-12.29-7.17-9.7-3-23.77-2-27.12,4.46-14.91,16.48-22.67,23.6-27.26" transform="translate(-77.06 -164.09)" style="fill:none;stroke:#0365f4;stroke-miterlimit:10;stroke-width:2px"/>
<!-- Vattendrag Sillforsen -->
<path d="M545.3,307.11c3.5-20.69,7.87-34.72,11.38-43.95,2.94-7.74,5.75-13.35,6.24-22.47,0.36-6.69-.77-10.54,1.35-17.66,1.92-6.43,3.88-6.75,4.41-11.59,0.76-7-3-8.73-4-16.89-0.92-7.94,2.4-8.54,2.63-18" transform="translate(-77.06 -164.09)" style="fill:none;stroke:#0365f4;stroke-miterlimit:10;stroke-width:2px"/>
<?php
foreach($sparArr AS $key => $val){
	echo $val.'a/>';
}
?>


<!-- Start Hedemora -->

<circle cx="206.21" cy="227.48" r="5.67" transform="translate(-130.16 -101) rotate(-15.44)" style="fill:#e71e25;stroke:#231f20;stroke-miterlimit:10"/>

<!-- Norrhyttan -->
<circle cx="601.52" cy="203.13" r="5.67" transform="matrix(0.96, -0.27, 0.27, 0.96, -109.42, 3.33)" style="fill:#e71e25;stroke:#231f20;stroke-miterlimit:10"/>

<!-- Bondhyttan -->
<circle cx="486.92" cy="260.87" r="5.67" transform="translate(-128.92 -25.09) rotate(-15.44)" style="fill:#e71e25;stroke:#231f20;stroke-miterlimit:10"/>

<!-- Bomansbo -->
<circle cx="383.15" cy="210.79" r="5.67" transform="translate(-119.34 -54.51) rotate(-15.44)" style="fill:#e71e25;stroke:#231f20;stroke-miterlimit:10"/>

<!-- Smedjebacken -->
<circle cx="154.82" cy="285.59" r="5.67" transform="matrix(0.96, -0.27, 0.27, 0.96, -147.48, -112.58)" style="fill:#e71e25;stroke:#231f20;stroke-miterlimit:10"/>

<!-- Bj򲳪򠭭 -->
<circle cx="295.8" cy="267.18" r="5.67" transform="translate(-137.49 -75.72) rotate(-15.44)" style="fill:#e71e25;stroke:#231f20;stroke-miterlimit:10"/>

<!-- Grängesberg Mål -->
<circle cx="693.67" cy="315.94" r="5.67" transform="translate(-136.12 31.92) rotate(-15.44)" style="fill:#e71e25;stroke:#231f20;stroke-miterlimit:10"/>



<!-- Linjer som visar delsträcksbrytning -->
<line x1="75.98" y1="90" x2="85.97" y2="104.89" style="fill:none;stroke:#231f20;stroke-miterlimit:10;stroke-width:2px"/>
<line x1="73.36" y1="65.48" x2="91.26" y2="66.42" style="fill:none;stroke:#231f20;stroke-miterlimit:10;stroke-width:2px"/>
<line x1="153.76" y1="42.94" x2="163.75" y2="57.82" style="fill:none;stroke:#231f20;stroke-miterlimit:10;stroke-width:2px"/>
<line x1="174.12" y1="139.85" x2="175.9" y2="119.99" style="fill:none;stroke:#231f20;stroke-miterlimit:10;stroke-width:2px"/>
<line x1="248.52" y1="90.6" x2="256.68" y2="106.56" style="fill:none;stroke:#231f20;stroke-miterlimit:10;stroke-width:2px"/>
<line x1="261.58" y1="62.29" x2="278.94" y2="70.95" style="fill:none;stroke:#231f20;stroke-miterlimit:10;stroke-width:2px"/>
<line x1="335.8" y1="44.38" x2="352.2" y2="39.85" style="fill:none;stroke:#231f20;stroke-miterlimit:10;stroke-width:2px"/>
<line x1="334.58" y1="78.95" x2="352.48" y2="79.89" style="fill:none;stroke:#231f20;stroke-miterlimit:10;stroke-width:2px"/>
<line x1="367.93" y1="140.6" x2="367.93" y2="122.68" style="fill:none;stroke:#231f20;stroke-miterlimit:10;stroke-width:2px"/>
<line x1="449.37" y1="76.01" x2="450.36" y2="93.91" style="fill:none;stroke:#231f20;stroke-miterlimit:10;stroke-width:2px"/>
<line x1="494.62" y1="67.61" x2="504.61" y2="82.49" style="fill:none;stroke:#231f20;stroke-miterlimit:10;stroke-width:2px"/>
<line x1="555.57" y1="51.69" x2="563.38" y2="35.55" style="fill:none;stroke:#231f20;stroke-miterlimit:10;stroke-width:2px"/>
<line x1="583.58" y1="74.17" x2="599.97" y2="69.65" style="fill:none;stroke:#231f20;stroke-miterlimit:10;stroke-width:2px"/>
<line x1="618.95" y1="120.26" x2="633.83" y2="110.26" style="fill:none;stroke:#231f20;stroke-miterlimit:10;stroke-width:2px"/>
<line x1="174.11" y1="89.22" x2="156.38" y2="86.6" style="fill:none;stroke:#231f20;stroke-miterlimit:10;stroke-width:2px"/>
<use width="51.15" height="60.64" transform="translate(-9.36 137.62) rotate(-15.44)" xlink:href="#Compass_Rose"/>
</svg>
</div>